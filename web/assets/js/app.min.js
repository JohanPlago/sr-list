window.srList={},function(t,e){function i(i){i.preventDefault(),e.createPlaylistSpinner=new Spinner(s());var a=t(this).data("target-url"),o=t(this);t.ajax(a,{method:"POST",beforeSend:function(){t(".js-create-playlist-status-error").addClass("hidden"),t(".js-create-playlist-status-success").addClass("hidden"),o.addClass("hidden"),e.createPlaylistSpinner.spin(t(".js-create-playlist")[0])}}).done(n).fail(function(e){try{r(t.parseJSON(e.responseText).error_message)}catch(i){r("Fel i kommunikation med servern. Vi vet tyvärr inget mer.")}}).always(function(){e.createPlaylistSpinner.stop()})}function r(e){t(".js-create-playlist-status-error").removeClass("hidden").text(e),t(".js-create-playlist-trigger").removeClass("hidden")}function n(e,i,n){return"ok"!==e&&201!==n.status?void r("Någet gick fel. Vi vet tyvärr inget mer."):(t(".js-create-playlist-status-success").removeClass("hidden"),t(".js-create-playlist-status-error").addClass("hidden"),void t(".js-create-playlist-trigger").addClass("hidden"))}function s(){return{lines:13,length:28,width:17,radius:36,scale:.25,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:81,fps:20,zIndex:2e9,className:"spinner",top:"0",left:"24px",shadow:!1,hwaccel:!1,position:"relative"}}t(function(){t(".js-create-playlist-trigger").on("click",i)})}(jQuery,srList),function(t,e){e.loadTracks=function(r){var s=t(".js-tracklist-spinner-container");e.loadTracksSpinner=new Spinner(n()).spin(s[0]),t.getJSON(r).success(i).always(function(){e.loadTracksSpinner.stop(),s.remove()})};var i=function(e){var i=t("#jst-tracklist");if(0===e.length)return void i.html(t("#jst-tracklist-empty").html());var n=t(t("#jst-track-template").html());t.each(e,function(t,e){$trackListItem=n.clone(),$trackListItem.find(".jst-track-name").html(e.name),$trackListItem.find(".jst-track-artists").html(r(e.artists)),"undefined"!=typeof e.album?(e.album.images.length>1&&$trackListItem.find(".jst-album-image").prop("src",e.album.images[1].url),e.album.name.length>0?$trackListItem.find(".jst-album-name").html(" - "+e.album.name):$trackListItem.find(".jst-album-name").remove(),$trackListItem.find(".jst-album-placeholder").remove()):$trackListItem.find(".jst-album-image").remove(),"undefined"!=typeof e.spotify_uri?($trackListItem.find(".jst-spotify-uri-a").prop("href",e.spotify_uri),$trackListItem.find(".jst-spotify-not-found").remove()):$trackListItem.find(".jst-spotify-uri").remove(),i.append($trackListItem)})},r=function(t){for(var e="",i=0;i<t.length;i++)e+=t[i].name,i!==t.length-1&&(e+=", ");return e},n=function(){return{lines:13,length:28,width:17,radius:36,scale:.5,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:81,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"}}}(jQuery,srList),function(t,e){"object"==typeof module&&module.exports?module.exports=e():"function"==typeof define&&define.amd?define(e):t.Spinner=e()}(this,function(){"use strict";function t(t,e){var i,r=document.createElement(t||"div");for(i in e)r[i]=e[i];return r}function e(t){for(var e=1,i=arguments.length;i>e;e++)t.appendChild(arguments[e]);return t}function i(t,e,i,r){var n=["opacity",e,~~(100*t),i,r].join("-"),s=.01+i/r*100,a=Math.max(1-(1-t)/e*(100-s),t),o=c.substring(0,c.indexOf("Animation")).toLowerCase(),l=o&&"-"+o+"-"||"";return p[n]||(d.insertRule("@"+l+"keyframes "+n+"{0%{opacity:"+a+"}"+s+"%{opacity:"+t+"}"+(s+.01)+"%{opacity:1}"+(s+e)%100+"%{opacity:"+t+"}100%{opacity:"+a+"}}",d.cssRules.length),p[n]=1),n}function r(t,e){var i,r,n=t.style;if(e=e.charAt(0).toUpperCase()+e.slice(1),void 0!==n[e])return e;for(r=0;r<u.length;r++)if(i=u[r]+e,void 0!==n[i])return i}function n(t,e){for(var i in e)t.style[r(t,i)||i]=e[i];return t}function s(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var r in i)void 0===t[r]&&(t[r]=i[r])}return t}function a(t,e){return"string"==typeof t?t:t[e%t.length]}function o(t){this.opts=s(t||{},o.defaults,f)}function l(){function i(e,i){return t("<"+e+' xmlns="urn:schemas-microsoft.com:vml" class="spin-vml">',i)}d.addRule(".spin-vml","behavior:url(#default#VML)"),o.prototype.lines=function(t,r){function s(){return n(i("group",{coordsize:d+" "+d,coordorigin:-c+" "+-c}),{width:d,height:d})}function o(t,o,l){e(p,e(n(s(),{rotation:360/r.lines*t+"deg",left:~~o}),e(n(i("roundrect",{arcsize:r.corners}),{width:c,height:r.scale*r.width,left:r.scale*r.radius,top:-r.scale*r.width>>1,filter:l}),i("fill",{color:a(r.color,t),opacity:r.opacity}),i("stroke",{opacity:0}))))}var l,c=r.scale*(r.length+r.width),d=2*r.scale*c,u=-(r.width+r.length)*r.scale*2+"px",p=n(s(),{position:"absolute",top:u,left:u});if(r.shadow)for(l=1;l<=r.lines;l++)o(l,-2,"progid:DXImageTransform.Microsoft.Blur(pixelradius=2,makeshadow=1,shadowopacity=.3)");for(l=1;l<=r.lines;l++)o(l);return e(t,p)},o.prototype.opacity=function(t,e,i,r){var n=t.firstChild;r=r.shadow&&r.lines||0,n&&e+r<n.childNodes.length&&(n=n.childNodes[e+r],n=n&&n.firstChild,n=n&&n.firstChild,n&&(n.opacity=i))}}var c,d,u=["webkit","Moz","ms","O"],p={},f={lines:12,length:7,width:5,radius:10,scale:1,corners:1,color:"#000",opacity:.25,rotate:0,direction:1,speed:1,trail:100,fps:20,zIndex:2e9,className:"spinner",top:"50%",left:"50%",shadow:!1,hwaccel:!1,position:"absolute"};if(o.defaults={},s(o.prototype,{spin:function(e){this.stop();var i=this,r=i.opts,s=i.el=t(null,{className:r.className});if(n(s,{position:r.position,width:0,zIndex:r.zIndex,left:r.left,top:r.top}),e&&e.insertBefore(s,e.firstChild||null),s.setAttribute("role","progressbar"),i.lines(s,i.opts),!c){var a,o=0,l=(r.lines-1)*(1-r.direction)/2,d=r.fps,u=d/r.speed,p=(1-r.opacity)/(u*r.trail/100),f=u/r.lines;!function m(){o++;for(var t=0;t<r.lines;t++)a=Math.max(1-(o+(r.lines-t)*f)%u*p,r.opacity),i.opacity(s,t*r.direction+l,a,r);i.timeout=i.el&&setTimeout(m,~~(1e3/d))}()}return i},stop:function(){var t=this.el;return t&&(clearTimeout(this.timeout),t.parentNode&&t.parentNode.removeChild(t),this.el=void 0),this},lines:function(r,s){function o(e,i){return n(t(),{position:"absolute",width:s.scale*(s.length+s.width)+"px",height:s.scale*s.width+"px",background:e,boxShadow:i,transformOrigin:"left",transform:"rotate("+~~(360/s.lines*d+s.rotate)+"deg) translate("+s.scale*s.radius+"px,0)",borderRadius:(s.corners*s.scale*s.width>>1)+"px"})}for(var l,d=0,u=(s.lines-1)*(1-s.direction)/2;d<s.lines;d++)l=n(t(),{position:"absolute",top:1+~(s.scale*s.width/2)+"px",transform:s.hwaccel?"translate3d(0,0,0)":"",opacity:s.opacity,animation:c&&i(s.opacity,s.trail,u+d*s.direction,s.lines)+" "+1/s.speed+"s linear infinite"}),s.shadow&&e(l,n(o("#000","0 0 4px #000"),{top:"2px"})),e(r,e(l,o(a(s.color,d),"0 0 1px rgba(0,0,0,.1)")));return r},opacity:function(t,e,i){e<t.childNodes.length&&(t.childNodes[e].style.opacity=i)}}),"undefined"!=typeof document){d=function(){var i=t("style",{type:"text/css"});return e(document.getElementsByTagName("head")[0],i),i.sheet||i.styleSheet}();var m=n(t("group"),{behavior:"url(#default#VML)"});!r(m,"transform")&&m.adj?l():c=r(m,"animation")}return o});